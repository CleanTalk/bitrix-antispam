-- ?????????? --

????? ????????
?????????
?????
???????
API
???????
????????


-- ????? ???????? --

????????-?????? ?? CleanTalk ??? ?????? ?????? ?? 1?-??????? ?? ??????????? ????-?????
 ? ?????????? ????-????????????.

??????? ???????????.
* ?? ????? CAPTCHA ? ??.
* ?????? ?? ????-????? ? ??????? ?????.
* ????????????? - ?????????????? ?????????? ??????????? ????????????.
* API - ????????? ?????? ??? ??????????? ?????? ?? CleanTalk ? ????
   ?????? ? ???????.

??? ????? CleanTalk.
 CleanTalk - ??? SaaS ?????? ??? ?????? Web-?????? ?? ?????.
 CleanTalk ?????????? ?????? ??????, ??????? ???????? ??? ??????????? ??????.
 ????????????? CleanTalk ?????? ???????? CAPTCHA, ???????/?????? ? ??????
  ?????? ??????, ???????????? ????? ??????????? ?? ?????.

??? ??? ????????.
 ??????????? ? ??????? ?? ??????????? ?????????? ?????? CleanTalk, ??????
  ??????????? ? ?????? ??????????? ????????, ????? ???? ???????? ?????
  ??????? ??? ????????? ???????????/???????????.


-- ????????? --

1. ???????? ???? ??????? ?? http://CleanTalk.org.
2. ?????????? ?????? CleanTalk ??? ?????? ? ??????? ???? ??????? ? ??? ?????????.


-- ????? --

* ????????? ??????????? ???????????? ? ??????? "stop_email@example.com".
* ????????? ???????????? ??????????? ? ?????? "stop_word".

-- ??????? --

? ?????? 2.0.1 ?????? ?? ????? ??????? ????????? ? ????????.


-- API --

???? 5 API ??????? ?????? CleanTalk.

1. CheckAllBefore(&$arEntity, $bSendEmail = FALSE)
 @param &array ?????? ???????? (??????????? ??? ????? ????????????)
 @param boolean ???????? ?????? ?? ????? ?? ??????? ??? ??? (?? ????????? FALSE)
 @return array|null ????????? ???????? ??? NULL ??? ?????? ??????????
 ????????????? ????? ??? ???????? ??????????? ??? ?????? ???????????? ?? ????. ?? ???????? ????
  ???????? ? ??? ?????? ????? ????????? ?? ???????, ???? ???? (?????????? ?????? 1 ?????????
  ? 15 ????? ?? ????????? ?????).

 ???? $arEntity ??????? ?? ???????? $arEntity['type']:
  $arEntity['type'] = 'comment' ?????????? ???????? ???????????
  $arEntity['type'] = 'register' ?????????? ???????? ???????????

 ???? $arEntity ?????? ???? ??????????, ??? ???????:

  $arEntity['type'] = 'comment';
  $arEntity['sender_email'];
  $arEntity['sender_nickname'];
  $arEntity['sender_ip'];
  $arEntity['message_title']; // ????????? ??????????? ?? ???????? ???? ????
  $arEntity['message_body'];  //  ???? ??????????? ?? ????????
  $arEntity['example_title']; // ????????? ?????????????? ??????? ???? ????
  $arEntity['example_body'];  //  ???? ?????????????? ???????
  $arEntity['example_comments']; // ????????? ? ???? ?? ????? ??? 10 ?????????
                                 //  ?????????? ???????????? ??????????? ???????? "\n\n".
  ???

  $arEntity['type'] = 'register';
  $arEntity['sender_email'];
  $arEntity['sender_nickname'];
  $arEntity['sender_ip'];

 ????? ???? ??? ?????? ?????? ????????????? ?? ????? ?????????? ?
  ?????? ? ?.?.

 ??. ??? ??? ??? ?????? ??????????.
 ??????????? ???? ????? ? ???????.
 ????? ????? ???????? ?? ??????? OnBefore*.

2. CheckCommentAfter($module, $cid, $log_event = '')
 @param string ??? ??????, ?????????? ??????? ('blog', 'forum', ? ?.?.)
 @param int ID ???????????? ??????? (???????????, ????????? ? ?.?.)
 @param string ??????? ??????? ?????????? ???????, ??? ???????????
 ?????????? ? ?????? CheckAllBefore ????? ???????? ???????????/?????????. ?? ?????????
  ?????????? ??????? CleanTalk ? ???????????? ? ??????????? ???????? ??? ??????? ?????
  ????? ? ???????? ??????? CleanTalk ? ????????? ???????.
 ??????????? ???? ????? ? ???????.
 ????? ????? ???????? ?? ??????? OnAfter* ?????? ??? ???????? ????????????/?????????,
  ?? ????????? ??? ??? ???????? ?????????????.

3. SendFeedback($module, $id, $feedback)
 @param string ??? ??????, ?????????? ??????? ('blog', 'forum', ? ?.?.)
 @param int ID ???????????? ??????? (???????????, ????????? ? ?.?.)
 @param string ??? ???????? ????? - ?????? 'Y' ??? 'N'
 ??????? ?????????? ?????? ????????? ?? ?????? CleanTalk. ??? ???????? ??????
  CleanTalk.
 ????? ????? ???????? ??????? CleanTalk ? ?????????? ?????? ?????????.
  ??????????, ?? ????????? ??? ??????.
 ??????????? ???? ????? ? ???????.

4. GetCleanTalkResume($module, $id)
 @param string ??? ??????, ?????????? ??????? ('blog', 'forum', ? ?.?.)
 @param int ID ???????????? ??????? (???????????, ????????? ? ?.?.)
 @return string|boolean ????? ?????? CleanTalk ???? ???? ??? FALSE ???? ???
 ?????????????? ?????. ?? ?????????? ?????? CleanTalk ?? ??????????? ????? ??
  ID ??????????? ??? ?????????.
 ??????????? ???? ????? ? ???????/????????, ??. ???????.

5. FormAddon($sType)
 ???????! ???????? ??? ?????????????, ?????????? ?????? ??????.


-- ??????? --

/components/bitrix/forum.message.template/templates/.default
??? ????? ???????? ?????? ??????? ????????? ??????, ??????? ??????? ??????????
 ?????? CleanTalk ????? ??? ????? ?????????. ??? ??? ??????? ???????
 ??? ??????????.


-- ???????? --

?? ??????????? ?????????? ? ??? ?? https://cleantalk.org/contacts
